<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—˜ë¦¬ë² ì´í„° ë¶€í’ˆ ë„¤íŠ¸ì›Œí¬ ê·¸ë˜í”„</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .graph-container {
            flex: 1;
            position: relative;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            margin: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .sidebar {
            width: 350px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            padding: 20px;
            overflow-y: auto;
            border-left: 1px solid rgba(255, 255, 255, 0.2);
        }

        .sidebar h2 {
            color: white;
            margin-top: 0;
            font-size: 1.5em;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .part-info {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .part-info:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .part-info h3 {
            color: white;
            margin-top: 0;
            font-size: 1.2em;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .part-info p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.9em;
            line-height: 1.4;
            margin: 10px 0;
        }

        .part-specs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .spec-tag {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .controls {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
            color: white;
            font-size: 0.8em;
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }

        .node {
            stroke: #fff;
            stroke-width: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .node:hover {
            stroke-width: 4px;
            filter: brightness(1.2);
        }

        .node.selected {
            stroke: #ffd700;
            stroke-width: 5px;
            filter: drop-shadow(0 0 10px #ffd700);
        }

        .link {
            stroke: rgba(255, 255, 255, 0.6);
            stroke-width: 2px;
            transition: all 0.3s ease;
        }

        .link.highlighted {
            stroke: #ffd700;
            stroke-width: 4px;
            filter: drop-shadow(0 0 5px #ffd700);
        }

        .node-label {
            font-size: 12px;
            fill: white;
            text-anchor: middle;
            font-weight: bold;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.8);
            pointer-events: none;
        }

        .search-container {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
        }

        .search-input {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 15px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            width: 200px;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1001;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="graph-container">
        <div class="controls">
            <button class="control-btn" onclick="resetZoom()">ğŸ” ë¦¬ì…‹</button>
            <button class="control-btn" onclick="togglePhysics()">âš¡ ë¬¼ë¦¬íš¨ê³¼</button>
            <button class="control-btn" onclick="exportGraph()">ğŸ’¾ ë‚´ë³´ë‚´ê¸°</button>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background-color: #ff6b6b;"></div>
                <span>ì œì–´ ì‹œìŠ¤í…œ</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #4ecdc4;"></div>
                <span>ê¸°ê³„ ë¶€í’ˆ</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #45b7d1;"></div>
                <span>ì „ê¸° ë¶€í’ˆ</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #f9ca24;"></div>
                <span>ì•ˆì „ ì¥ì¹˜</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #6c5ce7;"></div>
                <span>êµ¬ì¡° ë¶€í’ˆ</span>
            </div>
        </div>

        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="ë¶€í’ˆ ê²€ìƒ‰...">
            <button class="control-btn" onclick="searchPart()">ğŸ” ê²€ìƒ‰</button>
        </div>

        <svg id="network-graph"></svg>
        <div class="tooltip" id="tooltip"></div>
    </div>

    <div class="sidebar">
        <h2>ë¶€í’ˆ ì •ë³´</h2>
        <div id="part-details">
            <div class="part-info">
                <h3>ë¶€í’ˆì„ í´ë¦­í•˜ì„¸ìš”</h3>
                <p>ë„¤íŠ¸ì›Œí¬ ê·¸ë˜í”„ì—ì„œ ë¶€í’ˆì„ í´ë¦­í•˜ë©´ ìƒì„¸ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>
</div>

<script>
    // ì—˜ë¦¬ë² ì´í„° ë¶€í’ˆ ë°ì´í„°
    const elevatorData = {
        nodes: [
            // ì œì–´ ì‹œìŠ¤í…œ
            { id: 'controller', name: 'ì œì–´ë°˜', category: 'control', color: '#ff6b6b', description: 'ì—˜ë¦¬ë² ì´í„° ì „ì²´ ë™ì‘ì„ ì œì–´í•˜ëŠ” ì¤‘ì•™ ì‹œìŠ¤í…œ', specs: ['CPU', 'ë©”ëª¨ë¦¬', 'í†µì‹  ëª¨ë“ˆ'] },
            { id: 'selector', name: 'ì¸µì„ íƒê¸°', category: 'control', color: '#ff6b6b', description: 'ìŠ¹ê°•ì¥ì—ì„œ ì¸µì„ ì„ íƒí•˜ëŠ” ë²„íŠ¼ íŒ¨ë„', specs: ['ë²„íŠ¼', 'LED', 'ìŒì„±ì•ˆë‚´'] },
            { id: 'indicator', name: 'ì¸µí‘œì‹œê¸°', category: 'control', color: '#ff6b6b', description: 'í˜„ì¬ ì¸µê³¼ ìš´í–‰ ë°©í–¥ì„ í‘œì‹œ', specs: ['LED ë””ìŠ¤í”Œë ˆì´', 'ë°©í–¥ í™”ì‚´í‘œ'] },

            // ê¸°ê³„ ë¶€í’ˆ
            { id: 'motor', name: 'ê¶Œìƒê¸°', category: 'mechanical', color: '#4ecdc4', description: 'ì—˜ë¦¬ë² ì´í„°ë¥¼ ìƒí•˜ë¡œ ì›€ì§ì´ê²Œ í•˜ëŠ” ëª¨í„°', specs: ['AC ëª¨í„°', 'ê¸°ì–´ë°•ìŠ¤', 'ë¸Œë ˆì´í¬'] },
            { id: 'rope', name: 'ì™€ì´ì–´ë¡œí”„', category: 'mechanical', color: '#4ecdc4', description: 'ì—˜ë¦¬ë² ì´í„° ì¹´ë¥¼ ì§€ì§€í•˜ëŠ” ê°•ì²  ë¡œí”„', specs: ['ê°•ì² ì„ ', 'ìœ¤í™œìœ ', 'ì•ˆì „ê³„ìˆ˜'] },
            { id: 'pulley', name: 'ë„ë¥´ë˜', category: 'mechanical', color: '#4ecdc4', description: 'ì™€ì´ì–´ë¡œí”„ì˜ ë°©í–¥ì„ ë°”ê¾¸ëŠ” ì¥ì¹˜', specs: ['ë² ì–´ë§', 'í™ˆê°€ê³µ', 'ê· í˜•ì¶”'] },
            { id: 'counterweight', name: 'ê· í˜•ì¶”', category: 'mechanical', color: '#4ecdc4', description: 'ì—˜ë¦¬ë² ì´í„° ì¹´ì˜ ë¬´ê²Œë¥¼ ìƒì‡„í•˜ëŠ” ì¶”', specs: ['ì² íŒ', 'ê°€ì´ë“œ', 'ì•ˆì „ì¥ì¹˜'] },

            // ì „ê¸° ë¶€í’ˆ
            { id: 'power', name: 'ì „ì›ê³µê¸‰ì¥ì¹˜', category: 'electrical', color: '#45b7d1', description: 'ì—˜ë¦¬ë² ì´í„° ì „ì²´ì— ì „ë ¥ì„ ê³µê¸‰', specs: ['ë³€ì••ê¸°', 'ì •ë¥˜ê¸°', 'ë°°ì „ë°˜'] },
            { id: 'inverter', name: 'ì¸ë²„í„°', category: 'electrical', color: '#45b7d1', description: 'ëª¨í„° ì†ë„ë¥¼ ì œì–´í•˜ëŠ” ì¥ì¹˜', specs: ['VVVF', 'ì£¼íŒŒìˆ˜ ì œì–´', 'í† í¬ ì œì–´'] },
            { id: 'encoder', name: 'ì—”ì½”ë”', category: 'electrical', color: '#45b7d1', description: 'ì—˜ë¦¬ë² ì´í„° ìœ„ì¹˜ë¥¼ ê°ì§€í•˜ëŠ” ì„¼ì„œ', specs: ['ìœ„ì¹˜ ê°ì§€', 'ì†ë„ ê°ì§€', 'ë°©í–¥ ê°ì§€'] },

            // ì•ˆì „ ì¥ì¹˜
            { id: 'safety_gear', name: 'ì•ˆì „ì¥ì¹˜', category: 'safety', color: '#f9ca24', description: 'ë¹„ìƒì‹œ ì—˜ë¦¬ë² ì´í„°ë¥¼ ì •ì§€ì‹œí‚¤ëŠ” ì¥ì¹˜', specs: ['ê¸°ê³„ì‹', 'ì „ê¸°ì‹', 'ë¹„ìƒì œë™'] },
            { id: 'door_sensor', name: 'ë„ì–´ì„¼ì„œ', category: 'safety', color: '#f9ca24', description: 'ë¬¸ì˜ ê°œí ìƒíƒœë¥¼ ê°ì§€', specs: ['ê´‘ì„¼ì„œ', 'ì ‘ì´‰ì„¼ì„œ', 'ì•ˆì „ì„¼ì„œ'] },
            { id: 'emergency_brake', name: 'ë¹„ìƒë¸Œë ˆì´í¬', category: 'safety', color: '#f9ca24', description: 'ë¹„ìƒ ìƒí™©ì—ì„œ ì¦‰ì‹œ ì •ì§€', specs: ['ìë™ ì‘ë™', 'ìˆ˜ë™ í•´ì œ', 'ì´ì¤‘ ì•ˆì „'] },

            // êµ¬ì¡° ë¶€í’ˆ
            { id: 'car', name: 'ì—˜ë¦¬ë² ì´í„° ì¹´', category: 'structure', color: '#6c5ce7', description: 'ìŠ¹ê°ì´ íƒ‘ìŠ¹í•˜ëŠ” ê³µê°„', specs: ['ìŠ¤í…Œì¸ë¦¬ìŠ¤', 'ë‚´ì¥ì¬', 'ì¡°ëª…'] },
            { id: 'rail', name: 'ê°€ì´ë“œë ˆì¼', category: 'structure', color: '#6c5ce7', description: 'ì—˜ë¦¬ë² ì´í„° ì¹´ì˜ ì›€ì§ì„ì„ ì•ˆë‚´', specs: ['Tí˜• ë ˆì¼', 'ë¸Œë˜í‚·', 'ì™„ì¶©ê¸°'] },
            { id: 'door', name: 'ì¶œì…ë¬¸', category: 'structure', color: '#6c5ce7', description: 'ì—˜ë¦¬ë² ì´í„° ì¶œì…êµ¬', specs: ['ìë™ê°œí', 'ì•ˆì „ì¥ì¹˜', 'ë°©í™”ë¬¸'] },
            { id: 'shaft', name: 'ìŠ¹ê°•ë¡œ', category: 'structure', color: '#6c5ce7', description: 'ì—˜ë¦¬ë² ì´í„°ê°€ ì›€ì§ì´ëŠ” í†µë¡œ', specs: ['ì½˜í¬ë¦¬íŠ¸', 'ë°©ìˆ˜', 'í™˜ê¸°ì‹œì„¤'] }
        ],
        links: [
            // ì œì–´ ì‹œìŠ¤í…œ ì—°ê²°
            { source: 'controller', target: 'selector', relation: 'ì œì–´ì‹ í˜¸' },
            { source: 'controller', target: 'indicator', relation: 'í‘œì‹œì‹ í˜¸' },
            { source: 'controller', target: 'motor', relation: 'êµ¬ë™ì‹ í˜¸' },
            { source: 'controller', target: 'inverter', relation: 'ì œì–´ì‹ í˜¸' },
            { source: 'controller', target: 'door_sensor', relation: 'ìƒíƒœì‹ í˜¸' },

            // ê¸°ê³„ ë¶€í’ˆ ì—°ê²°
            { source: 'motor', target: 'rope', relation: 'ë™ë ¥ì „ë‹¬' },
            { source: 'rope', target: 'pulley', relation: 'ë°©í–¥ë³€í™˜' },
            { source: 'rope', target: 'car', relation: 'ì§€ì§€ì—°ê²°' },
            { source: 'rope', target: 'counterweight', relation: 'ê· í˜•ì—°ê²°' },

            // ì „ê¸° ë¶€í’ˆ ì—°ê²°
            { source: 'power', target: 'controller', relation: 'ì „ë ¥ê³µê¸‰' },
            { source: 'power', target: 'inverter', relation: 'ì „ë ¥ê³µê¸‰' },
            { source: 'inverter', target: 'motor', relation: 'ì „ë ¥ì œì–´' },
            { source: 'encoder', target: 'controller', relation: 'ìœ„ì¹˜ì‹ í˜¸' },

            // ì•ˆì „ ì¥ì¹˜ ì—°ê²°
            { source: 'safety_gear', target: 'car', relation: 'ì•ˆì „ì œë™' },
            { source: 'door_sensor', target: 'door', relation: 'ìƒíƒœê°ì§€' },
            { source: 'emergency_brake', target: 'motor', relation: 'ë¹„ìƒì œë™' },

            // êµ¬ì¡° ë¶€í’ˆ ì—°ê²°
            { source: 'car', target: 'rail', relation: 'ê°€ì´ë“œ' },
            { source: 'door', target: 'car', relation: 'ì¶œì…êµ¬' },
            { source: 'rail', target: 'shaft', relation: 'ê³ ì •ì„¤ì¹˜' },
            { source: 'car', target: 'shaft', relation: 'ìš´í–‰ê³µê°„' }
        ]
    };

    // D3.js ì„¤ì •
    const width = window.innerWidth * 0.7;
    const height = window.innerHeight;

    const svg = d3.select('#network-graph')
        .attr('width', width)
        .attr('height', height);

    // ì¤Œ ê¸°ëŠ¥
    const zoom = d3.zoom()
        .scaleExtent([0.1, 4])
        .on('zoom', (event) => {
            g.attr('transform', event.transform);
        });

    svg.call(zoom);

    const g = svg.append('g');

    // ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜
    let simulation = d3.forceSimulation(elevatorData.nodes)
        .force('link', d3.forceLink(elevatorData.links).id(d => d.id).distance(100))
        .force('charge', d3.forceManyBody().strength(-300))
        .force('center', d3.forceCenter(width / 2, height / 2))
        .force('collision', d3.forceCollide().radius(30));

    // ë§í¬ ìƒì„±
    const links = g.append('g')
        .selectAll('line')
        .data(elevatorData.links)
        .enter()
        .append('line')
        .attr('class', 'link')
        .style('stroke', 'rgba(255, 255, 255, 0.6)')
        .style('stroke-width', 2);

    // ë…¸ë“œ ìƒì„±
    const nodes = g.append('g')
        .selectAll('circle')
        .data(elevatorData.nodes)
        .enter()
        .append('circle')
        .attr('class', 'node')
        .attr('r', 25)
        .attr('fill', d => d.color)
        .call(d3.drag()
            .on('start', dragstarted)
            .on('drag', dragged)
            .on('end', dragended))
        .on('click', showPartDetails)
        .on('mouseover', showTooltip)
        .on('mouseout', hideTooltip);

    // ë…¸ë“œ ë¼ë²¨
    const labels = g.append('g')
        .selectAll('text')
        .data(elevatorData.nodes)
        .enter()
        .append('text')
        .attr('class', 'node-label')
        .text(d => d.name)
        .style('font-size', '12px')
        .style('fill', 'white')
        .style('text-anchor', 'middle')
        .style('font-weight', 'bold')
        .style('text-shadow', '0 0 3px rgba(0, 0, 0, 0.8)')
        .style('pointer-events', 'none');

    // ì‹œë®¬ë ˆì´ì…˜ ì—…ë°ì´íŠ¸
    simulation.on('tick', () => {
        links
            .attr('x1', d => d.source.x)
            .attr('y1', d => d.source.y)
            .attr('x2', d => d.target.x)
            .attr('y2', d => d.target.y);

        nodes
            .attr('cx', d => d.x)
            .attr('cy', d => d.y);

        labels
            .attr('x', d => d.x)
            .attr('y', d => d.y + 40);
    });

    // ë“œë˜ê·¸ í•¨ìˆ˜ë“¤
    function dragstarted(event, d) {
        if (!event.active) simulation.alphaTarget(0.3).restart();
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(event, d) {
        d.fx = event.x;
        d.fy = event.y;
    }

    function dragended(event, d) {
        if (!event.active) simulation.alphaTarget(0);
        d.fx = null;
        d.fy = null;
    }

    // ë¶€í’ˆ ì„¸ë¶€ ì •ë³´ í‘œì‹œ
    function showPartDetails(event, d) {
        // ì„ íƒëœ ë…¸ë“œ ê°•ì¡°
        nodes.classed('selected', false);
        d3.select(this).classed('selected', true);

        // ì—°ê²°ëœ ë§í¬ ê°•ì¡°
        links.classed('highlighted', false);
        links.filter(l => l.source.id === d.id || l.target.id === d.id)
            .classed('highlighted', true);

        // ì‚¬ì´ë“œë°” ì—…ë°ì´íŠ¸
        const detailsDiv = document.getElementById('part-details');
        detailsDiv.innerHTML = `
                <div class="part-info">
                    <h3>${d.name}</h3>
                    <p><strong>ì¹´í…Œê³ ë¦¬:</strong> ${getCategoryName(d.category)}</p>
                    <p>${d.description}</p>
                    <div class="part-specs">
                        ${d.specs.map(spec => `<span class="spec-tag">${spec}</span>`).join('')}
                    </div>
                </div>
                <div class="part-info">
                    <h3>ì—°ê²°ëœ ë¶€í’ˆ</h3>
                    ${getConnectedParts(d.id)}
                </div>
            `;
    }

    // ì¹´í…Œê³ ë¦¬ ì´ë¦„ ë³€í™˜
    function getCategoryName(category) {
        const categories = {
            'control': 'ì œì–´ ì‹œìŠ¤í…œ',
            'mechanical': 'ê¸°ê³„ ë¶€í’ˆ',
            'electrical': 'ì „ê¸° ë¶€í’ˆ',
            'safety': 'ì•ˆì „ ì¥ì¹˜',
            'structure': 'êµ¬ì¡° ë¶€í’ˆ'
        };
        return categories[category] || category;
    }

    // ì—°ê²°ëœ ë¶€í’ˆ ì°¾ê¸°
    function getConnectedParts(nodeId) {
        const connections = elevatorData.links.filter(link =>
            link.source.id === nodeId || link.target.id === nodeId
        );

        return connections.map(conn => {
            const connectedId = conn.source.id === nodeId ? conn.target.id : conn.source.id;
            const connectedNode = elevatorData.nodes.find(n => n.id === connectedId);
            return `<p><strong>${connectedNode.name}</strong> - ${conn.relation}</p>`;
        }).join('');
    }

    // íˆ´íŒ í‘œì‹œ
    function showTooltip(event, d) {
        const tooltip = document.getElementById('tooltip');
        tooltip.innerHTML = `<strong>${d.name}</strong><br>${d.description}`;
        tooltip.style.opacity = '1';
        tooltip.style.left = (event.pageX + 10) + 'px';
        tooltip.style.top = (event.pageY - 10) + 'px';
    }

    // íˆ´íŒ ìˆ¨ê¸°ê¸°
    function hideTooltip() {
        document.getElementById('tooltip').style.opacity = '0';
    }

    // ì œì–´ í•¨ìˆ˜ë“¤
    function resetZoom() {
        svg.transition().duration(750).call(
            zoom.transform,
            d3.zoomIdentity
        );
    }

    let physicsEnabled = true;
    function togglePhysics() {
        physicsEnabled = !physicsEnabled;
        if (physicsEnabled) {
            simulation.restart();
        } else {
            simulation.stop();
        }
    }

    function exportGraph() {
        const svgData = new XMLSerializer().serializeToString(svg.node());
        const blob = new Blob([svgData], { type: 'image/svg+xml' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'elevator-network-graph.svg';
        a.click();
        URL.revokeObjectURL(url);
    }

    function searchPart() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        if (!searchTerm) return;

        const foundNode = elevatorData.nodes.find(node =>
            node.name.toLowerCase().includes(searchTerm) ||
            node.description.toLowerCase().includes(searchTerm)
        );

        if (foundNode) {
            // ê²€ìƒ‰ëœ ë…¸ë“œë¡œ ì´ë™
            const transform = d3.zoomIdentity
                .translate(width / 2 - foundNode.x, height / 2 - foundNode.y)
                .scale(1.5);

            svg.transition().duration(750).call(zoom.transform, transform);

            // ë…¸ë“œ ê°•ì¡°
            showPartDetails(null, foundNode);
        } else {
            alert('ë¶€í’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
    }

    // ê²€ìƒ‰ ì…ë ¥ ì—”í„° í‚¤ ì²˜ë¦¬
    document.getElementById('searchInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            searchPart();
        }
    });

    // ë°˜ì‘í˜• ì²˜ë¦¬
    window.addEventListener('resize', () => {
        const newWidth = window.innerWidth * 0.7;
        const newHeight = window.innerHeight;

        svg.attr('width', newWidth).attr('height', newHeight);
        simulation.force('center', d3.forceCenter(newWidth / 2, newHeight / 2));
        simulation.restart();
    });
</script>
</body>
</html>